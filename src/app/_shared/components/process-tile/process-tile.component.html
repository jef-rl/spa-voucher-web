<div spa-voucher-process-tile>
  <div description>
    <div>{{process?.description?.short}}</div>
  </div>
  <div activity>
    <div>
      <ng-container *ngFor="let activityItem of process?.activity">{{activityItem?.action}}</ng-container>
    </div>
    <div></div>
  </div>
  <div reminders>
    <div>
      <ng-container *ngFor="let remind of process?.reminder; let last=last">
        <ng-container *ngIf="remind.toDate() > nowdate">
          <ui-date [date]="remind"></ui-date>
        </ng-container>
        <ng-container *ngIf="last && remind.toDate() <= nowdate ">
          <ui-date [date]="remind"></ui-date>
        </ng-container>
      </ng-container>
    </div>
  </div>
  <div priority>
    <div>{{process?.priority}}</div>
    <ng-container *ngFor="let remind of process?.reminder; let last=last">
      <ng-container *ngIf="last && remind.toDate() <= nowdate ">
        <div><b>&nbsp;&nbsp;&nbsp;{{(nowdate.valueOf() - remind.toDate().valueOf())/86400000 | number:'1.1-1'}} day(s) overdue </b></div>
      </ng-container>
    </ng-container>
  </div>
  <div taskOwner>
    <ng-container *ngIf="process.ownerUid"> {{process.ownerId}} </ng-container>
    <ng-container *ngIf="!process.ownerUid && users && users.length && users.length>0">
      <div [matMenuTriggerFor]="usrList">
        <mat-icon>person_outline</mat-icon>
      </div>
      <mat-menu #usrList="matMenu">
        <div mat-menu-item *ngFor="let user of users" (click)="selectUser(user)">
          <ui-user-tile [user]="user"></ui-user-tile>
        </div>
      </mat-menu>
    </ng-container>
  </div>
</div>
